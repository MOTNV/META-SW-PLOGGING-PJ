<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í”Œë¡œê¹… ì•± ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡° ì‹œê°í™”</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 30px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            padding: 40px;
        }

        .section {
            margin-bottom: 50px;
        }

        .section h2 {
            color: #333;
            font-size: 2rem;
            margin-bottom: 20px;
            border-bottom: 3px solid #4CAF50;
            padding-bottom: 10px;
        }

        .db-diagram {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            overflow-x: auto;
        }

        .tables-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .table-card {
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .table-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        }

        .table-header {
            background: linear-gradient(135deg, #4CAF50, #45a049);
            color: white;
            padding: 15px 20px;
            font-weight: bold;
            font-size: 1.2rem;
        }

        .table-body {
            padding: 20px;
        }

        .field {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 0;
            border-bottom: 1px solid #eee;
        }

        .field:last-child {
            border-bottom: none;
        }

        .field-name {
            font-weight: 600;
            color: #333;
        }

        .field-type {
            color: #666;
            font-size: 0.9rem;
            background: #f0f0f0;
            padding: 2px 8px;
            border-radius: 4px;
        }

        .primary-key {
            background: #FFD700;
            color: #333;
        }

        .foreign-key {
            background: #87CEEB;
            color: #333;
        }

        .relationships {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .relationships h3 {
            color: #856404;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }

        .relationship-item {
            background: white;
            padding: 12px 15px;
            margin: 8px 0;
            border-radius: 8px;
            border-left: 4px solid #f39c12;
            font-weight: 500;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .feature-card {
            background: linear-gradient(135deg, #74b9ff, #0984e3);
            color: white;
            padding: 25px;
            border-radius: 12px;
            text-align: center;
        }

        .feature-card h3 {
            font-size: 1.4rem;
            margin-bottom: 10px;
        }

        .feature-card p {
            opacity: 0.9;
            line-height: 1.6;
        }

        .data-flow {
            background: #e8f5e8;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
        }

        .data-flow h3 {
            color: #2d5a2d;
            margin-bottom: 15px;
        }

        .flow-step {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #4CAF50;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, #a29bfe, #6c5ce7);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2rem;
            }
            
            .content {
                padding: 20px;
            }
            
            .tables-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸƒâ€â™‚ï¸ í”Œë¡œê¹… ì•± ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°</h1>
            <p>í™˜ê²½ì„ ìƒê°í•˜ëŠ” ëŸ¬ë‹ ì•±ì˜ ì™„ì „í•œ ë°ì´í„° ì„¤ê³„</p>
        </div>

        <div class="content">
            <!-- í†µê³„ ì„¹ì…˜ -->
            <div class="section">
                <h2>ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ê°œìš”</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">9</div>
                        <div class="stat-label">í•µì‹¬ í…Œì´ë¸”</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">50+</div>
                        <div class="stat-label">ë°ì´í„° í•„ë“œ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">7</div>
                        <div class="stat-label">ì¸ë±ìŠ¤</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">100%</div>
                        <div class="stat-label">RLS ë³´ì•ˆ</div>
                    </div>
                </div>
            </div>

            <!-- í…Œì´ë¸” êµ¬ì¡° -->
            <div class="section">
                <h2>ğŸ—„ï¸ í…Œì´ë¸” êµ¬ì¡°</h2>
                <div class="tables-grid">
                    <!-- ì‚¬ìš©ì í…Œì´ë¸” -->
                    <div class="table-card">
                        <div class="table-header">ğŸ‘¤ users (ì‚¬ìš©ì ì •ë³´)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">email</span>
                                <span class="field-type">VARCHAR(255)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">username</span>
                                <span class="field-type">VARCHAR(50)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">total_distance</span>
                                <span class="field-type">DECIMAL(10,2)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">total_calories</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">level</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                        </div>
                    </div>

                    <!-- í”Œë¡œê¹… ì„¸ì…˜ í…Œì´ë¸” -->
                    <div class="table-card">
                        <div class="table-header">ğŸƒâ€â™‚ï¸ plogging_sessions (ìš´ë™ ê¸°ë¡)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">user_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">start_time</span>
                                <span class="field-type">TIMESTAMP</span>
                            </div>
                            <div class="field">
                                <span class="field-name">distance</span>
                                <span class="field-type">DECIMAL(10,2)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">calories_burned</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">trash_collected</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                        </div>
                    </div>

                    <!-- GPS ê²½ë¡œ í¬ì¸íŠ¸ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ“ route_points (GPS ê²½ë¡œ)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">session_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">latitude</span>
                                <span class="field-type">DECIMAL(10,8)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">longitude</span>
                                <span class="field-type">DECIMAL(11,8)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">speed</span>
                                <span class="field-type">DECIMAL(5,2)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">timestamp</span>
                                <span class="field-type">TIMESTAMP</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì“°ë ˆê¸° ìˆ˜ì§‘ ê¸°ë¡ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ—‘ï¸ trash_collections (ì“°ë ˆê¸° ìˆ˜ì§‘)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">session_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">trash_type</span>
                                <span class="field-type">VARCHAR(50)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">quantity</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">photo_url</span>
                                <span class="field-type">TEXT</span>
                            </div>
                            <div class="field">
                                <span class="field-name">location_name</span>
                                <span class="field-type">VARCHAR(200)</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì—…ì  ì‹œìŠ¤í…œ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ† achievements (ì—…ì )</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">name</span>
                                <span class="field-type">VARCHAR(100)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">category</span>
                                <span class="field-type">VARCHAR(50)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">requirement_value</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">experience_reward</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì‚¬ìš©ì ì—…ì  -->
                    <div class="table-card">
                        <div class="table-header">ğŸ–ï¸ user_achievements (ì‚¬ìš©ì ì—…ì )</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">user_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">achievement_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">achieved_at</span>
                                <span class="field-type">TIMESTAMP</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì¼ë³„ í†µê³„ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ“ˆ user_stats_daily (ì¼ë³„ í†µê³„)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">user_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">date</span>
                                <span class="field-type">DATE</span>
                            </div>
                            <div class="field">
                                <span class="field-name">sessions_count</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">total_distance</span>
                                <span class="field-type">DECIMAL(10,2)</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì±Œë¦°ì§€ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ¯ challenges (ì±Œë¦°ì§€)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">title</span>
                                <span class="field-type">VARCHAR(200)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">challenge_type</span>
                                <span class="field-type">VARCHAR(50)</span>
                            </div>
                            <div class="field">
                                <span class="field-name">target_value</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">reward_experience</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                        </div>
                    </div>

                    <!-- ì‚¬ìš©ì ì±Œë¦°ì§€ -->
                    <div class="table-card">
                        <div class="table-header">ğŸ® user_challenges (ì‚¬ìš©ì ì±Œë¦°ì§€)</div>
                        <div class="table-body">
                            <div class="field">
                                <span class="field-name">id</span>
                                <span class="field-type primary-key">UUID PK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">user_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">challenge_id</span>
                                <span class="field-type foreign-key">UUID FK</span>
                            </div>
                            <div class="field">
                                <span class="field-name">current_progress</span>
                                <span class="field-type">INTEGER</span>
                            </div>
                            <div class="field">
                                <span class="field-name">is_completed</span>
                                <span class="field-type">BOOLEAN</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ê´€ê³„ë„ -->
            <div class="section">
                <h2>ğŸ”— í…Œì´ë¸” ê´€ê³„ë„</h2>
                <div class="relationships">
                    <h3>ì£¼ìš” ê´€ê³„</h3>
                    <div class="relationship-item">
                        <strong>auth.users</strong> â†’ <strong>plogging_sessions</strong> (1:N) - í•œ ì‚¬ìš©ìê°€ ì—¬ëŸ¬ ìš´ë™ ì„¸ì…˜ì„ ê°€ì§ˆ ìˆ˜ ìˆìŒ
                    </div>
                    <div class="relationship-item">
                        <strong>plogging_sessions</strong> â†’ <strong>route_points</strong> (1:N) - í•œ ì„¸ì…˜ì— ì—¬ëŸ¬ GPS í¬ì¸íŠ¸
                    </div>
                    <div class="relationship-item">
                        <strong>plogging_sessions</strong> â†’ <strong>trash_collections</strong> (1:N) - í•œ ì„¸ì…˜ì— ì—¬ëŸ¬ ì“°ë ˆê¸° ìˆ˜ì§‘ ê¸°ë¡
                    </div>
                    <div class="relationship-item">
                        <strong>users</strong> â†” <strong>achievements</strong> (N:M) - ì‚¬ìš©ìì™€ ì—…ì ì˜ ë‹¤ëŒ€ë‹¤ ê´€ê³„
                    </div>
                    <div class="relationship-item">
                        <strong>users</strong> â†” <strong>challenges</strong> (N:M) - ì‚¬ìš©ìì™€ ì±Œë¦°ì§€ì˜ ë‹¤ëŒ€ë‹¤ ê´€ê³„
                    </div>
                </div>
            </div>

            <!-- ë°ì´í„° íë¦„ -->
            <div class="section">
                <h2>ğŸ”„ ë°ì´í„° íë¦„</h2>
                
                <div class="data-flow">
                    <h3>1. í”Œë¡œê¹… ì„¸ì…˜ ì‹œì‘</h3>
                    <div class="flow-step">
                        <strong>Step 1:</strong> plogging_sessions í…Œì´ë¸”ì— ìƒˆ ì„¸ì…˜ ìƒì„± (start_time ê¸°ë¡)
                    </div>
                    <div class="flow-step">
                        <strong>Step 2:</strong> GPS í¬ì¸íŠ¸ë¥¼ route_pointsì— ì‹¤ì‹œê°„ ì €ì¥
                    </div>
                    <div class="flow-step">
                        <strong>Step 3:</strong> ì“°ë ˆê¸° ë°œê²¬ ì‹œ trash_collectionsì— ê¸°ë¡ (ì‚¬ì§„, ìœ„ì¹˜, íƒ€ì…)
                    </div>
                </div>

                <div class="data-flow">
                    <h3>2. ì„¸ì…˜ ì¢…ë£Œ ë° í†µê³„ ì—…ë°ì´íŠ¸</h3>
                    <div class="flow-step">
                        <strong>Step 1:</strong> plogging_sessions ì—…ë°ì´íŠ¸ (end_time, ê±°ë¦¬, ì¹¼ë¡œë¦¬ ë“±)
                    </div>
                    <div class="flow-step">
                        <strong>Step 2:</strong> user_stats_daily ì¼ë³„ í†µê³„ ì—…ë°ì´íŠ¸
                    </div>
                    <div class="flow-step">
                        <strong>Step 3:</strong> ì—…ì  ë‹¬ì„± í™•ì¸ ë° user_achievements ì—…ë°ì´íŠ¸
                    </div>
                    <div class="flow-step">
                        <strong>Step 4:</strong> ì±Œë¦°ì§€ ì§„í–‰ë„ ì—…ë°ì´íŠ¸ (user_challenges)
                    </div>
                </div>
            </div>

            <!-- ì£¼ìš” ê¸°ëŠ¥ -->
            <div class="section">
                <h2>âš¡ ì£¼ìš” ê¸°ëŠ¥</h2>
                <div class="features-grid">
                    <div class="feature-card">
                        <h3>ğŸ” ë³´ì•ˆ</h3>
                        <p>Row Level Security (RLS)ë¡œ ì‚¬ìš©ìë³„ ë°ì´í„° ì ‘ê·¼ ì œì–´. ê° ì‚¬ìš©ìëŠ” ìì‹ ì˜ ë°ì´í„°ë§Œ ì ‘ê·¼ ê°€ëŠ¥</p>
                    </div>
                    <div class="feature-card">
                        <h3>ğŸ“Š ì‹¤ì‹œê°„ í†µê³„</h3>
                        <p>ì¼ë³„/ì£¼ë³„/ì›”ë³„ í†µê³„ ìë™ ì§‘ê³„. ê±°ë¦¬, ì¹¼ë¡œë¦¬, ì“°ë ˆê¸° ìˆ˜ì§‘ëŸ‰ ë“± ì¢…í•© ë¶„ì„</p>
                    </div>
                    <div class="feature-card">
                        <h3>ğŸ† ê²Œì„í™”</h3>
                        <p>ì—…ì  ì‹œìŠ¤í…œê³¼ ì±Œë¦°ì§€ë¡œ ì‚¬ìš©ì ì°¸ì—¬ë„ í–¥ìƒ. ë ˆë²¨ì—…ê³¼ ê²½í—˜ì¹˜ ì‹œìŠ¤í…œ</p>
                    </div>
                    <div class="feature-card">
                        <h3>ğŸ“ GPS ì¶”ì </h3>
                        <p>ì •í™•í•œ ê²½ë¡œ ê¸°ë¡ê³¼ ì‹¤ì‹œê°„ ìœ„ì¹˜ ì¶”ì . ê³ ë„, ì†ë„, ì •í™•ë„ ì •ë³´ í¬í•¨</p>
                    </div>
                    <div class="feature-card">
                        <h3>ğŸ—‘ï¸ í™˜ê²½ ê¸°ì—¬</h3>
                        <p>ì“°ë ˆê¸° ìˆ˜ì§‘ ê¸°ë¡ê³¼ ì‚¬ì§„ ì €ì¥. í™˜ê²½ ë³´í˜¸ í™œë™ì˜ ì‹œê°ì  ì¦ê±° ì œê³µ</p>
                    </div>
                    <div class="feature-card">
                        <h3>âš¡ ì„±ëŠ¥ ìµœì í™”</h3>
                        <p>ì¸ë±ìŠ¤ ìµœì í™”ì™€ ë°°ì¹˜ ì²˜ë¦¬ë¡œ ë¹ ë¥¸ ì‘ë‹µ ì†ë„. ëŒ€ìš©ëŸ‰ GPS ë°ì´í„° íš¨ìœ¨ ì²˜ë¦¬</p>
                    </div>
                </div>
            </div>

            <!-- êµ¬í˜„ ê³ ë ¤ì‚¬í•­ -->
            <div class="section">
                <h2>ğŸ’¡ êµ¬í˜„ ì‹œ ê³ ë ¤ì‚¬í•­</h2>
                <div class="data-flow">
                    <div class="flow-step">
                        <strong>ì‹¤ì‹œê°„ GPS ì¶”ì :</strong> route_points í…Œì´ë¸”ì— ë°°ì¹˜ ì‚½ì…ìœ¼ë¡œ ì„±ëŠ¥ ìµœì í™”
                    </div>
                    <div class="flow-step">
                        <strong>ì´ë¯¸ì§€ ì €ì¥:</strong> Supabase Storageë¥¼ í™œìš©í•œ ì“°ë ˆê¸° ì‚¬ì§„ ì €ì¥
                    </div>
                    <div class="flow-step">
                        <strong>í†µê³„ ê³„ì‚°:</strong> íŠ¸ë¦¬ê±° í•¨ìˆ˜ë¥¼ í™œìš©í•œ ìë™ í†µê³„ ì—…ë°ì´íŠ¸
                    </div>
                    <div class="flow-step">
                        <strong>ìºì‹±:</strong> ìì£¼ ì¡°íšŒë˜ëŠ” í†µê³„ ë°ì´í„°ëŠ” Redis ë“±ìœ¼ë¡œ ìºì‹±
                    </div>
                    <div class="flow-step">
                        <strong>ë°ì´í„° ì••ì¶•:</strong> ì˜¤ë˜ëœ GPS í¬ì¸íŠ¸ëŠ” ì••ì¶•í•˜ì—¬ ì €ì¥ ê³µê°„ ì ˆì•½
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>